<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Map (Plotly)</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
  html,body{margin:0;height:100%;overflow:hidden;font-family:sans-serif}
  #map{width:100%;height:100%}
  #dialog{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#fff;color:#000;padding:12px;border-radius:10px;display:none;z-index:999}
    .btn {
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: var(--accent-color);
      color: var(--button-text-color);
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .btn:hover {
      opacity: 0.9;
    }

    form {
      margin-top: 20px;
      width: 100%;
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      font-size: 15px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      background: var(--input-bg);
      color: var(--text-color);
      resize: vertical;
    }

    textarea {
      min-height: 100px;
    }
</style>
</head>
<body>
  <div id="mainApp" class="main">
    <h1>Привет из Mini App </h1>
    <p>MiniApp успешно открыт в Telegram!</p>
    <button id="actionBtn" class="btn">Открыть форму</button>

    <form id="dataForm">
      <input required="" id="nameInput" placeholder="Ваше имя" type="text">
      <textarea required="" id="msgInput" placeholder="Ваше сообщение"></textarea>
      <button class="btn" type="submit">Отправить</button>
    </form>
  </div>
<script>
    const form = document.getElementById("dataForm");
    const actionBtn = document.getElementById("actionBtn");
    const tg = window.Telegram.WebApp;
    tg.ready();
    
    actionBtn.addEventListener("click", () => {
      form.style.display = "flex";
      actionBtn.style.display = "none";
    });

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const name = document.getElementById("nameInput").value.trim();
      const msg = document.getElementById("msgInput").value.trim();

      if (!name || !msg) return;

      const payload = {
        name,
        message: msg
      };

      tg.sendData(JSON.stringify(payload));
      tg.close();
    });
</script>
</body>
</html>


